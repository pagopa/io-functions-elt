{
  "name":"profile",
  "type":"record",
  "namespace": "dto",
  "doc":"Schema for cosmos api container 'profiles'",
  "fields":[
    {
      "name": "id",
      "type": "string"
    },
    {
      "name":"version",
      "type":"int",
      "default":0
    },
    {
      "name":"acceptedTosVersion",
      "type": "int",
      "default": "0"
    },
    {
      "name":"blockedInboxOrChannels",
      "type":{
        "type": "map",
        "values":{
          "type": "array",
          "items": {
            "type":"enum",
            "name":"BlockedInboxOrChannelEnum",
            "symbols":[
              "EMAIL",
              "WEBHOOK",
              "INBOX"
            ]
          }
        }
      },
      "default" : {}
    },
    {
      "name": "email",
      "type": "string"
    },
    {
      "name":"fiscalCode",
      "type": "string"
    },
    {
      "name": "isEmailEnabled",
      "type": "boolean"
    },
    {
      "name": "isEmailValidated",
      "type": "boolean"
    },
    {
      "name": "isInboxEnabled",
      "type": "boolean"
    },
    {
      "name": "isWebhookEnabled",
      "type": "boolean"
    },
    {
      "name": "isTestProfile",
      "type": ["null","boolean"],
      "default": null
    },
    {
      "name":"lastAppVersion",
      "type": ["null","string"],
      "default":null
    },
    {
      "name": "preferredLanguages",
      "type":["null", {
        "type": "array",
        "items": {
          "name": "PreferredLanguage",
          "type":"enum",
          "symbols":[
            "it_IT",
            "en_GB",
            "es_ES",
            "de_DE",
            "fr_FR"
          ]
        }
      }],
      "default": null
    },
    {
      "name":"pushNotificationsContentType",
      "type":["null",{
        "name":"PushNotificationsContentTypeEnum",
        "type":"enum",
        "symbols":[
          "UNSET",
          "FULL",
          "ANONYMOUS"
        ]
      }],
      "default":null
    },
    {
      "name": "reminderStatus",
      "type": ["null",{
        "type":"enum",
        "name":"ReminderStatus",
        "symbols":[
          "ENABLED",
          "DISABLED"
        ]
      }],
      "default":null
    },
    {
      "name":"servicePreferencesSettings",
      "type": [{
        "name":"ServicesPreferencesMode",
        "type": "record",
        "fields":[
          { 
            "name":"mode",
            "type":{
              "type":"enum",
              "name":"ServicesPreferencesModeEnum",
              "symbols":["AUTO","MANUAL"]
            }
          },
          {
            "name":"version",
            "doc": "This value can not be negative. Avro schema does not support unsigned integers",
            "type":"int",
            "default": 0
          }
        ]
      },{
        "name":"ServicesPreferencesModeLegacy",
        "type": "record",
        "fields":[
          { 
            "name":"mode",
            "type":{
              "type":"enum",
              "name":"ServicesPreferencesModeEnumLegacy",
              "symbols":["LEGACY"]
            }
          },
          {
            "name":"version",
            "doc": "In this case the version type is fixed to be -1",
            "type":"int",
            "default": -1
          }
        ]
      }]
    }
  ]
}
